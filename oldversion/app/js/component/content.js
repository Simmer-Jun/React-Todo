define(["exports","module","react","pubsub"],function(e,t,a,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var s=l(a),c=l(n),i=s["default"].createClass({displayName:"Intropage",render:function(){return s["default"].createElement("div",{className:"task-content-inner"},s["default"].createElement("div",{className:"content-task-title"},s["default"].createElement("span",{className:"icon"},""),s["default"].createElement("p",null,s["default"].createElement("span",null," Todo － 引导"))),s["default"].createElement("div",{className:"content-task-date"},s["default"].createElement("span",{className:"icon"},""),s["default"].createElement("p",null,s["default"].createElement("span",null,"2015-10-25"))),s["default"].createElement("div",{className:"content-inner"},s["default"].createElement("p",null,"Todo是一项个人任务管理应用，使用FaceBook框架",s["default"].createElement("a",{href:"https://facebook.github.io/react/index.html"},"React"),"渲染，使用",s["default"].createElement("a",{href:"https://github.com/rackt/redux"},"Redux"),"作为应用的数据流管理。"),s["default"].createElement("h2",null,"使用说明："),s["default"].createElement("ul",null,s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"}," + "),": 点击添加新的分类/新的任务"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 显示所有分类下的所有任务"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 任务分类列表"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 任务标题"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 任务日期"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 标记完成任务"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 修改任务内容"),s["default"].createElement("li",{className:"intro-item"},s["default"].createElement("span",{className:"icon"},""),": 删除分类/任务")),s["default"].createElement("div",{className:"content-inner-footer"},s["default"].createElement("p",null,"Designed By ",s["default"].createElement("a",{href:"http://www.hisimmer.com",target:"_blank",title:"Simmer's blog"},"Simmer")),s["default"].createElement("p",null,"© 2015 Simmer"))))}}),r=s["default"].createClass({displayName:"Detail",getInitialState:function(){return{edit:!1}},render:function(){var e,t,a,n;return this.props.cont.complete?(t=function(){return s["default"].createElement("div",{className:"edit-place"},s["default"].createElement("span",{className:"icon",title:"删除该项任务",onClick:this.deleteTaskHandler},""))}.bind(this),n=t()):(t=function(){return s["default"].createElement("div",{className:"edit-place"},s["default"].createElement("span",{className:"icon",title:"完成该项任务",onClick:this.completeTaskHandler},""),s["default"].createElement("span",{className:"icon",title:"修改该项任务",onClick:this.modifyTaskHandler},""),s["default"].createElement("span",{className:"icon",title:"删除该项任务",onClick:this.deleteTaskHandler},""))}.bind(this),n=t()),e=this.state.edit?function(){return s["default"].createElement("div",{className:"task-content-inner  task-edit"},s["default"].createElement("div",{className:"content-task-title"},s["default"].createElement("p",null,s["default"].createElement("span",{className:"pre-title"}," 标题 :"),s["default"].createElement("input",{type:"text",className:"task-title-input",ref:"taskTitleInput",defaultValue:this.props.cont.title}),s["default"].createElement("span",{className:"title-input-tips"},"20个字符内"),s["default"].createElement("span",{className:"task-cancel-btn",title:"取消任务",onClick:function(e){this.cancelTaskHandler()}.bind(this)},"取消"),s["default"].createElement("span",{className:"task-save-btn",title:"点击保存任务",onClick:function(e){this.saveTaskHandler()}.bind(this)},"保存"))),s["default"].createElement("div",{className:"content-task-date"},s["default"].createElement("p",null,s["default"].createElement("span",{className:"pre-title"},"日 期 :"),s["default"].createElement("input",{type:"date",className:"task-date-input",ref:"taskDateInput",defaultValue:this.props.cont.date}),s["default"].createElement("span",{className:"date-input-tips"},'输入格式:"xxxx-xx-xx"'))),s["default"].createElement("div",{className:"content-inner"},s["default"].createElement("textarea",{className:"task-content-input",ref:"taskContent",placeholder:"Do what today?",defaultValue:this.props.cont.content})))}.bind(this):function(){return s["default"].createElement("div",null,n,s["default"].createElement("div",{className:"content-task-title"},s["default"].createElement("span",{className:"icon"},""),s["default"].createElement("p",null,s["default"].createElement("span",null,this.props.cont.title))),s["default"].createElement("div",{className:"content-task-date"},s["default"].createElement("span",{className:"icon"},""),s["default"].createElement("p",null,s["default"].createElement("span",null,this.props.cont.date))),s["default"].createElement("div",{className:"content-inner"},this.props.cont.content.replace(/666/g,"U+000A")))}.bind(this),a=e(),s["default"].createElement("div",{className:"task-content-inner"},a)},deleteTaskHandler:function(){var e;e={id:this.props.cont.id,belong:this.props.active.activeClassId};var t={show:!0,type:"confirm",tips:"确认删除任务么？删除后不可恢复！"};c["default"].publish("alert",t,function(){c["default"].publish("deleteTask",e),c["default"].publish("setActiveTaskId","index")})},modifyTaskHandler:function(){this.setState({edit:!0})},completeTaskHandler:function(){var e;e={belong:this.props.active.activeClassId,id:this.props.cont.id,title:this.props.cont.title,date:this.props.cont.date,content:this.props.cont.content,complete:!0};var t={show:!0,type:"confirm",tips:"确认完成任务么？完成后不可修改！"};c["default"].publish("alert",t,function(){c["default"].publish("modifyTask",e)})},saveTaskHandler:function(){var e;e={belong:this.props.active.activeClassId,id:this.props.active.activeTaskId,title:this.refs.taskTitleInput.value,date:this.refs.taskDateInput.value,content:this.refs.taskContent.value,complete:!1},c["default"].publish("modifyTask",e),this.setState({edit:!1})},cancelTaskHandler:function(){this.setState({edit:!1})}}),d=s["default"].createClass({displayName:"Newtask",render:function(){return s["default"].createElement("div",{className:"task-content-inner  task-edit"},s["default"].createElement("div",{className:"content-task-title"},s["default"].createElement("p",null,s["default"].createElement("span",{className:"pre-title"}," 标题 :"),s["default"].createElement("input",{type:"text",className:"task-title-input",ref:"taskTitleInput",placeholder:"在这里输入任务标题"}),s["default"].createElement("span",{className:"title-input-tips"},"20个字符内"),s["default"].createElement("span",{className:"task-cancel-btn",title:"取消任务",onClick:function(e){this.cancelNewTaskHandler()}.bind(this)},"取消"),s["default"].createElement("span",{className:"task-save-btn",title:"点击保存任务",onClick:function(e){this.saveNewTaskHandler()}.bind(this)},"保存"))),s["default"].createElement("div",{className:"content-task-date"},s["default"].createElement("p",null,s["default"].createElement("span",{className:"pre-title"},"日 期 :"),s["default"].createElement("input",{type:"date",className:"task-date-input",ref:"taskDateInput",placeholder:"在这里输入任务日期"}),s["default"].createElement("span",{className:"date-input-tips"},'输入格式:"xxxx-xx-xx"'))),s["default"].createElement("div",{className:"content-inner"},s["default"].createElement("textarea",{className:"task-content-input",ref:"taskContent",placeholder:"Do what today?"})))},saveNewTaskHandler:function(){var e="task-"+Date.parse(new Date),t=this.refs.taskTitleInput.value.substr(0,20),a=this.refs.taskDateInput.value,n=this.refs.taskContent.value.replace(/\n/g,"666").substr(0,8e3),l=this.props.active.activeClassId,s={belong:l,id:e,title:t,date:a,content:n,complete:!1};c["default"].publish("addTask",s),c["default"].publish("setActiveTaskId",s.id)},cancelNewTaskHandler:function(){c["default"].publish("setActiveTaskId","index")}}),u=s["default"].createClass({displayName:"Content",render:function(){var e,t,a=this,n=this.props.active.activeTaskId;return e="index"===n?s["default"].createElement(i,null):"new"===n?s["default"].createElement(d,{active:this.props.active,addTask:function(e){return a.props.addTask(e)},setActive:function(e){return a.props.setActive(e)}}):s["default"].createElement(r,{cont:this.props.cont,active:this.props.active,deleteTask:function(e){return a.props.deleteTask(e)},modifyTask:function(e){return a.props.modifyTask(e)},setActive:function(e){return a.props.setActive(e)}}),t="content-body",this.props.view.open&&"content"===this.props.view.viewAt&&(t="content-body current"),s["default"].createElement("div",{className:"content-body",ref:"show",id:"box3"},e)},cancelNewTaskHandler:function(){var e=this.state;e.edit=!1,this.setState({state:e})},componentWillUpdate:function(e){var t=this.refs.show.className.split(" ")[0];this.refs.show.className=t+"  show animated fadeIn",setTimeout(function(){this.refs.show.className=t+" show"}.bind(this),500)}});t.exports=u});