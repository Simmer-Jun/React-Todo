define(["exports","module","react","pubsub"],function(e,t,a,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}var i=l(a),n=l(s),c=i["default"].createClass({displayName:"Tasklist",getInitialState:function(){return{show:"all"}},render:function(){var e,t,a;return t=this,this.props.taskCont.sort(function(e,t){return e.date>t.date?-1:e.date<t.date?1:0}),this.props.taskCont&&(e=this.props.taskCont.map(function(e,a){var s="task-item";return"all"===this.state.show?(e.complete&&(s="task-item task-done"),i["default"].createElement("div",{key:a,className:s},i["default"].createElement("p",{className:"handler-line"},i["default"].createElement("span",{className:"icon"}," "),i["default"].createElement("span",null,e.date),i["default"].createElement("span",{className:"task-handler-icon"},"....")),i["default"].createElement("p",{className:"task-title",onClick:function(t){return this.activeTaskHandler(e.id)}.bind(t)},e.title))):"active"===this.state.show?e.complete?null:i["default"].createElement("div",{key:a,className:s},i["default"].createElement("p",{className:"handler-line"},i["default"].createElement("span",{className:"icon"}," "),i["default"].createElement("span",null,e.date),i["default"].createElement("span",{className:"task-handler-icon"},"....")),i["default"].createElement("p",{className:"task-title",onClick:function(t){return this.activeTaskHandler(e.id)}.bind(t)},e.title)):e.complete?(s="task-item task-done",i["default"].createElement("div",{key:a,className:s},i["default"].createElement("p",{className:"handler-line"},i["default"].createElement("span",{className:"icon"}," "),i["default"].createElement("span",null,e.date),i["default"].createElement("span",{className:"task-handler-icon"},"....")),i["default"].createElement("p",{className:"task-title",onClick:function(t){return this.activeTaskHandler(e.id)}.bind(t)},e.title))):void 0}.bind(this))),a="task-body",this.props.view.open&&"task"===this.props.view.viewAt&&(a="task-body current"),i["default"].createElement("div",{className:"task-body",ref:"main",id:"box2"},i["default"].createElement("section",{className:"task-handler"},i["default"].createElement("p",null,i["default"].createElement("span",{className:"active",onClick:this.showAllHandler,ref:"allFilter"},"所  有"),i["default"].createElement("span",{ref:"activeFilter",onClick:this.showActiveHandler},"未完成"),i["default"].createElement("span",{ref:"completeFilter",onClick:this.showCompleteandler},"已完成"))),i["default"].createElement("section",{className:"task-box",ref:"show"},e),i["default"].createElement("section",{className:"add-task-box"},i["default"].createElement("p",{onClick:this.addTaskHandler},i["default"].createElement("span",{className:"icon"},"")," 添加任务")))},activeTaskHandler:function(e){return this.props.active.activeTaskId===e?!1:(n["default"].publish("setView","content"),void n["default"].publish("setActiveTaskId",e))},addTaskHandler:function(){if("index"===this.props.active.activeClassId||"all"===this.props.active.activeClassId){var e={show:!0,type:"confirm",tips:"请先选择当前任务所在的分类!"};return n["default"].publish("alert",e,function(){}),!1}if("new"===this.props.active.activeTaskId){var e={show:!0,type:"confirm",tips:"当前新建任务未保存，还新建任务吗？"};return n["default"].publish("alert",e,function(){}),!1}n["default"].publish("setView","content");var t="new";n["default"].publish("setActiveTaskId",t)},showAllHandler:function(){return"active"===this.refs.allFilter.className?!1:(this.refs.allFilter.className="active",this.refs.activeFilter.className=" ",this.refs.completeFilter.className=" ",void this.setState({show:"all"}))},showActiveHandler:function(){return"active"===this.refs.activeFilter.className?!1:(this.refs.allFilter.className="",this.refs.activeFilter.className="active",this.refs.completeFilter.className=" ",void this.setState({show:"active"}))},showCompleteandler:function(){return"active"===this.refs.completeFilter.className?!1:(this.refs.allFilter.className="",this.refs.activeFilter.className="",this.refs.completeFilter.className="active",void this.setState({show:"complete"}))},componentDidUpdate:function(e){var t=this.refs.show.className.split(" ")[0];this.refs.show.className=t+"  show animated fadeIn",setTimeout(function(){this.refs.show.className=t+" show"}.bind(this),500),this.props.view.open&&"task"===this.props.view.viewAt&&(this.refs.main.className="task-body current")}});t.exports=c});