define(["exports","module","react","react-dom","pubsub"],function(e,t,a,s,l){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var c=n(a),i=(n(s),n(l)),r=c["default"].createClass({displayName:"List",render:function(){var e=this,t=this.props.active.activeClassId,a=this.props.classContent.map(function(a,s){var l="class-list-item  clearfix";return a.id===t&&(l="class-list-item  active  clearfix"),c["default"].createElement("div",{key:a.id,className:l,onClick:function(e){this.activeHandler(a.id)}.bind(e)},c["default"].createElement("table",null,c["default"].createElement("tbody",null,c["default"].createElement("tr",null,c["default"].createElement("td",{className:"left"},c["default"].createElement("span",{className:"radious"})),c["default"].createElement("td",{className:"middle"},c["default"].createElement("span",{className:"class-inner"},a.name," (",a.taskNumber,")")),c["default"].createElement("td",{className:"right"},c["default"].createElement("span",{onClick:function(e){e.stopPropagation(),this.deleteClass(a.id)}.bind(e),className:"icon",title:"删除该分类"}," "))))))});return c["default"].createElement("section",{className:"class-list"},a)},deleteClass:function(e){var t={show:!0,type:"confirm",tips:"确认删除任务么？删除后不可恢复！"},a=this;i["default"].publish("alert",t,function(){e===a.props.active.activeClassId&&i["default"].publish("setActiveClassId","index"),i["default"].publish("deleteClass",e)})},activeHandler:function(e){var t={show:!0,type:"confirm",tips:"任务还未保存确认退出编辑任务么？"};if("new"===this.props.active.activeTaskId)i["default"].publish("alert",t,function(){i["default"].publish("setActiveClassId",e)});else{if(this.props.active.activeClassId===e)return!1;i["default"].publish("setActiveClassId",e)}}}),d=c["default"].createClass({displayName:"Addclass",getInitialState:function(){return{showForm:!1}},render:function(){var e=this,t=this.state.showForm?"add-class-btn-hidden":"add-class-btn",a=this.state.showForm?"add-class-form":"add-class-form-hidden";return c["default"].createElement("section",{className:"add-class-box"},c["default"].createElement("div",{className:t,ref:"add",onClick:function(t){return e.showForm()}},c["default"].createElement("span",{className:"icon"},"")," 点击添加分类"),c["default"].createElement("div",{className:a},c["default"].createElement("input",{type:"text",className:"class-input",ref:"classInput",placeholder:"在这里输入分类名称。。。",onKeyDown:this.keyDown}),c["default"].createElement("select",{className:"class-options"},c["default"].createElement("option",null,"学习"),c["default"].createElement("option",null,"工作"),c["default"].createElement("option",null,"生活"),c["default"].createElement("option",null,"娱乐"),c["default"].createElement("option",null,"其他")),c["default"].createElement("p",null,c["default"].createElement("span",{id:"create-class-btn",onClick:function(t){return e.sureHandler(t)}},"确定")," ",c["default"].createElement("span",{id:"class-cancel-btn",onClick:function(t){return e.cancelandler(t)}},"取消")),c["default"].createElement("p",{className:"tips"},c["default"].createElement("span",{className:"icon"},""),"请输入20个字以内")))},cancelandler:function(){this.setState({showForm:!1}),this.refs.classInput.value=""},showForm:function(){this.setState({showForm:!0})},sureHandler:function(e){var t=this.refs.classInput.value.substr(0,15);if(this.refs.classInput.value="",!t){var a={show:!0,type:"confirm",tips:"请输入分类名称!"};return void i["default"].publish("alert",a,function(){})}this.setState({showForm:!1}),i["default"].publish("addClass",{id:"class-"+Date.parse(new Date),name:t})},keyDown:function(e){13==e.keyCode&&this.sureHandler(e)}}),u=c["default"].createClass({displayName:"Classlist",getInitialState:function(){return{activeID:"index"}},render:function(){var e,t,a;return t="all-task","all"===this.props.active.activeClassId&&(t="all-task active"),e=0,this.props.classCont.map(function(t,a){e+=t.taskNumber}),a="class-body  ",this.props.view.open&&"class"===this.props.view.viewAt&&(a="class-body "),c["default"].createElement("section",{className:"class-body",id:"box1"},c["default"].createElement("header",null,c["default"].createElement("h2",{className:t,onClick:this.allTaskHandler},c["default"].createElement("span",{className:"icon"},"")," 所有任务(",c["default"].createElement("span",null,e),")"),c["default"].createElement("h2",null,c["default"].createElement("span",{className:"icon"},"")," 分类列表")),c["default"].createElement("section",{className:"class-body-main"},c["default"].createElement(r,{classContent:this.props.classCont,active:this.props.active}),c["default"].createElement(d,null)))},allTaskHandler:function(){if("all"===this.props.active.activeClassId)return!1;var e={show:!0,type:"confirm",tips:"任务还未保存确认退出编辑任务么？"};"new"===this.props.active.activeTaskId&&i["default"].publish("alert",e,function(){i["default"].publish("setActiveClassId","all")})}});t.exports=u});